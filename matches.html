<!DOCTYPE html>
<html lang="en">

<head>
  <title>Soccer &mdash; Website by Colorlib</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="fonts/icomoon/style.css">

  <link rel="stylesheet" href="css/bootstrap/bootstrap.css">
  <link rel="stylesheet" href="css/jquery-ui.css">
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">

  <link rel="stylesheet" href="css/jquery.fancybox.min.css">


  <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

  <link rel="stylesheet" href="css/aos.css">

  <link rel="stylesheet" href="css/style.css">



</head>

<body>

  <div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>


    <header class="site-navbar py-4" role="banner">

      <div class="container">
        <div class="d-flex align-items-center">
          <div class="site-logo">
            <a href="index.html">
              <img src="images/logo.png" alt="Logo">
            </a>
          </div>
          <div class="ml-auto">
            <nav class="site-navigation position-relative text-right" role="navigation">
              <ul class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li class="active"><a href="matches.html" class="nav-link">Matches</a></li>
                <li><a href="teams.html" class="nav-link">Teams</a></li>
                <li><a href="blog.html" class="nav-link">Blog</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
              </ul>
            </nav>

            <a href="#" class="d-inline-block d-lg-none site-menu-toggle js-menu-toggle text-black float-right text-white"><span
                class="icon-menu h3 text-white"></span></a>
          </div>
        </div>
      </div>

    </header>

    <div class="hero overlay" style="background-image: url('images/bg_3.jpg');">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-5 mx-auto text-center">
            <h1 class="text-white">Matches</h1>
            <p>Create matches here

                <div class="btn-group" role="group" aria-label="Third group">
    
    <button id="addmatch" class="btn btn-info">+</button>
  </div>

            </p>
          </div>

        </div>
      </div>
    </div>

    
    
    <div class="container">
      

      <div class="row">
        <div class="col-lg-12">
          
          <div class="d-flex team-vs">
            
            <div class="team-1 w-50">
              <div class="team-details w-100 text-center">
                
                <div id="box1">

                  
                    
                
                
                     
               <form id="form1" style="visibility: hidden;">
                     <h3>Select Team A</h3>
                        <select class="form-select" id="teamaplayerdisplay" aria-label="Default select example">
                            
                        </select> 
                </form> 

                    <br><br>

                     <button id="buttonsaveteams" class="btn btn-light" type="submit" style="visibility:hidden;">Save Teams</button>

                  <br><br>

                          <div class="form-check" id="lineupteamA" style="visibility: hidden;">
                            <h3>Select Team A Lineup</h3>

                         
                          </div>

                          <button id="savelineupA" class="btn btn-light" type="submit" style="visibility:hidden;">Save Lineup A</button>

                          <br><br>

                    <div>
                     
                        
                          <div class="form-group" id="otherdetsform" style="visibility:hidden">

                            <label for="exampleInputEmail1"><h3>Match Name</h3></label>
                            <input type="text" class="form-control" id="matchname" aria-describedby="emailHelp" placeholder="Enter match name">

                            <label for="exampleInputEmail1"><h3>Ground Name</h3></label>
                            <input type="text" class="form-control" id="groundname" aria-describedby="emailHelp" placeholder="Enter ground name">
                            
                            <br>

                            <label for="exampleInputEmail1"><h3>Overs</h3></label>
                            <input type="number" class="form-control" id="noofovers" aria-describedby="emailHelp" placeholder="Enter number of overs">

                              <br>

                             <h3>Toss won by</h3>
                             <div class="form-check" id="displaytwoteams">
                              
                            

                            </div> 

                            <h3>Opted to</h3>
                            <div class="form-check" id="displaychoice">
                              
                            

                            </div> 


                            <button id="creatematch" class="btn btn-light" type="submit" style="visibility:hidden">Create Match</button>
                            
                            <br><br>

                            <button id="schedulematch" class="btn btn-light" type="submit" style="visibility:hidden">Schedule Match</button>

                            <br><br>

                            <h3>(You can schedule match but need to select toss and opted to now)</h3>


                </div>

                  </div>

            
              
              </div>

 
                   


</div>

                       
            </div>




            <div class="team-2 w-50">
              <div class="team-details w-100 text-center">

                  <div id="box2">
                     
                    <form id="form2" style="visibility: hidden;">
                      <h3>Select Team B</h3>
                        <select class="form-select" id="teambplayerdisplay" aria-label="Default select example" required>
                            
                          </select>
                
                    </form>

                    <br><br>

                    <button id="ghostbutton" class="btn btn-light" type="submit" style="visibility:hidden;"></button>

                    <br><br>

                     <div class="form-check" id="lineupteamB" style="visibility: hidden;">
                            <h3>Select Team B Lineup</h3>

                         
                     </div>

                     <button id="savelineupB" class="btn btn-light" type="submit" style="visibility:hidden;">Save Lineup B</button>

                     <br><br>

                                         <div>
                     
                    
                          <div class="form-group" style="visibility:hidden;">
                            <label for="exampleInputEmail1">Team Name</label>
                            <input type="text" class="form-control" id="teemname" aria-describedby="emailHelp" placeholder="Enter team name">
                            <small id="emailHelp" class="form-text text-muted">You can enter initials</small>

                            <label for="exampleInputEmail1">Player 1 Name</label>
                            <input type="text" class="form-control" id="p1input" aria-describedby="emailHelp" placeholder="Enter player 1 name">


                              
                              <br>

                            <button id="saveteambutton" type="submit">Save</button>

                </div>

                  </div>

                  </div>
              
              
              </div>
            </div>

           
          </div>
        </div>
      

      </div>
    </div>
  

    
    <div class="site-section bg-dark">
      <div class="container" id="matchesdisplay">
        
        



                  
      
      </div>

    </div> 

  </div>

    <p class="result"></p>
 

<script>

const btn = document.getElementById('addmatch');
const form1 = document.getElementById('form1');
const form2 = document.getElementById('form2');

const lineupteamA = document.getElementById('lineupteamA');
const lineupteamB = document.getElementById('lineupteamB');

const otherdetsform = document.getElementById('otherdetsform');

const buttonsaveteam = document.getElementById('buttonsaveteams');

const buttonsavelineupA = document.getElementById('savelineupA'); 
const buttonsavelineupB = document.getElementById('savelineupB'); 

const creatematch = document.getElementById('creatematch'); 
const schedulematch = document.getElementById('schedulematch'); 




btn.addEventListener('click', () => 
{

  if (form1.style.visibility === 'hidden') 
  {
    form1.style.visibility = 'visible';
    form2.style.visibility = 'visible';
    lineupteamA.style.visibility = 'visible';
    lineupteamB.style.visibility = 'visible';
    buttonsaveteam.style.visibility = 'visible';
    buttonsavelineupA.style.visibility = 'visible';
    buttonsavelineupB.style.visibility = 'visible';
    otherdetsform.style.visibility = 'visible';
    creatematch.style.visibility = 'visible';
    schedulematch.style.visibility = 'visible';
  } 
  else 
  {
    form1.style.visibility = 'hidden';
    form2.style.visibility = 'hidden';
    lineupteamA.style.visibility = 'hidden';
    lineupteamB.style.visibility = 'hidden';
    buttonsaveteam.style.visibility = 'hidden';
     buttonsavelineupA.style.visibility = 'hidden';
    buttonsavelineupB.style.visibility = 'hidden';
    otherdetsform.style.visibility = 'hidden';
    creatematch.style.visibility = 'hidden';
    schedulematch.style.visibility = 'hidden';
  }
});  

</script>


<script type="module">
  
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";

          import { getDatabase , set , ref , push , child , query, orderByChild , onValue , get } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
          
          var firebaseConfig = 
          {
            apiKey: "AIzaSyAest1kY2wkdzwWCPf7-bkwyhWLekXZDhE",
            authDomain: "cricket-master-d3c58.firebaseapp.com",
            databaseURL: "https://cricket-master-d3c58-default-rtdb.firebaseio.com",
            projectId: "cricket-master-d3c58",
            storageBucket: "cricket-master-d3c58.appspot.com",
            messagingSenderId: "554998698559",
            appId: "1:554998698559:web:6617512d672bc484305e8a"
          };

          
          const app = initializeApp(firebaseConfig);
          const database = getDatabase(app); 

  var tbody = document.getElementById('tbody1');


schedulematch.addEventListener('click', () => 
{

  var groundname = document.getElementById("groundname").value;
  var noofovers = document.getElementById("noofovers").value;
  var matchname = document.getElementById("matchname").value;


  var ele = document.getElementsByName("teamtoss");

  var con = document.getElementsByName("playchoice");

  var toss="";

  var optedto="";

  for(var i = 0; i < ele.length; i++) 
  {
                if(ele[i].checked)
                toss = ele[i].value;
  }

   for(var j = 0; j < con.length; j++) 
  {
                if(con[j].checked)
                optedto = con[j].value;
  }

  /* console.log("Team A is"+teamaselected);
  console.log("Team B is"+teambselected);

  console.log("Team A playesr"+teama);
  console.log("Team B playesr"+teamb);

  console.log("Match Name"+matchname);
  console.log("Ground name"+groundname);
  console.log("Overs"+noofovers);
  console.log("Toss"+toss);
  console.log("Opted to"+optedto); */

               set (ref(database,'Matches/'+matchname) , {
                                    MatchID : matchname,
                                    Team1 : teamaselected,
                                    Team2 : teambselected,
                                    PlayersTeam1 : teama,
                                    PlayersTeam2 : teamb,
                                    Overs : noofovers,
                                    Ground : groundname,
                                    Toss : toss,
                                    OptedTo : optedto
                                  });


                              set (ref(database,matchname+"/"+"Data/") , {
                                    MatchID : matchname,
                                    Team1 : teamaselected,
                                    Team2 : teambselected,
                                    PlayersTeam1 : teama,
                                    PlayersTeam2 : teamb,
                                    Overs : noofovers,
                                    Ground : groundname,
                                    Toss : toss,
                                    OptedTo : optedto
                                  });

});

    /* function addplayertotable(name)
    {
          let trow = document.createElement("tr");
          let td1 = document.createElement('td');


          td1.innerHTML= name;
  

          trow.appendChild(td1);
          tbody.appendChild(trow);
    } 

     function addallplayerstotable(ThePlayer)
     {
         
         tbody.innerHTML="";
         
         ThePlayer.forEach(element=>{
           addplayertotable(element.Name);
         });
      }

    
      function Getalldata()
      {
        const dbref = ref(database);

        get(child(dbref,"users"))
        .then((snapshot)=>{
          var players = [];
          
          snapshot.forEach(childSnapshot=> {
              players.push(childSnapshot.val());
          });
          addallplayerstotable(players);
        })

      }

      function getrealtimedata()
      {
         const dbref = ref(database,"users");

         onValue(dbref,(snapshot)=>{
          var players = [];
          
          snapshot.forEach(childSnapshot=> {
              players.push(childSnapshot.val());
          });
          addallplayerstotable(players);
        })
      } */

const playeref = ref(database,"Teams/");
const matchref = ref(database,"Matches/");

function readteamsandmatches() 
{
  
  onValue(playeref,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("teamaplayerdisplay").innerHTML += `
      <option value="${issue.Team}">${issue.Team}</option>
      `
  
      document.getElementById("teambplayerdisplay").innerHTML += `
      <option value="${issue.Team}">${issue.Team}</option>`


    })
  })

  onValue(matchref,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue2 = snap.val();

      document.getElementById("matchesdisplay").innerHTML += `

              <div class="row mb-5">
          <div class="col-lg-12">
            <div class="widget-next-match">
              <div class="widget-title">
                <h3>Match</h3>
              </div>

              <div class="widget-body mb-3">
                <div class="widget-vs">
                  <div class="d-flex align-items-center justify-content-around justify-content-between w-100">
                    <div class="team-1 text-center">
                      <img src="images/logo_1.png" alt="Image">
                      <h3>${issue2.Team1}</h3>
                    </div>
                    <div>
                      <span class="vs"><span>VS</span></span>
                    </div>
                    <div class="team-2 text-center">
                      <img src="images/logo_2.png" alt="Image">
                      <h3>${issue2.Team2}</h3>
                    </div>
                  </div>
                </div>
              </div>

              <div class="text-center widget-vs-contents mb-4">
                <h4>Overs : ${issue2.Overs}</h4>
                <p class="mb-5">
                  <span class="d-block"><b>${issue2.Toss}</b> opted to <b>${issue2.OptedTo}</b></span>
                  <strong class="text-primary">@ ${issue2.Ground}</strong>
                </p>

                <div id="date-countdown2" class="pb-1"></div>
              </div>

              <div class="text-right widget-vs-contents mb-4">
                
                <p class="mb-5">
        
        <form action="score.html">
          <button onclick="cr7(this)" class="mybees" name="mybees" value="${issue2.MatchID}" type="submit" style="margin-right:20px">${issue2.MatchID}</button>
          </form>

                </p>

              </div>
            </div>
          </div>
        </div>
  
      `
    })
  })

}

  var teamaselected;

  var teambselected;


buttonsaveteam.addEventListener('click', () => 
{

  teamaselected = document.getElementById("teamaplayerdisplay").value;
  teambselected = document.getElementById("teambplayerdisplay").value;

  const getteamaplayers = ref(database,'Teams/'+teamaselected);

  const gettebmaplayers = ref(database,'Teams/'+teambselected);



  const opt1 = "Bat";
  const opt2 = "Bowl";

       document.getElementById("displaytwoteams").innerHTML += 
      `<input class="form-check-input" type="radio" name="teamtoss" id="${teamaselected}" value="${teamaselected}">
                              <label class="form-check-label" for="flexRadioDefault2">${teamaselected}</label>

                              <br>
      <input class="form-check-input" type="radio" name="teamtoss" id="${teambselected}" value="${teambselected}">
                              <label class="form-check-label" for="flexRadioDefault2">${teambselected}</label>

                          <br><br>`



        document.getElementById("displaychoice").innerHTML += 
      `<input class="form-check-input" type="radio" name="playchoice" id="${opt1}" value="${opt1}">
                              <label class="form-check-label" for="flexRadioDefault2">${opt1}</label>

                              <br>
      <input class="form-check-input" type="radio" name="playchoice" id="${opt2}" value="${opt2}">
                              <label class="form-check-label" for="flexRadioDefault2">${opt2}</label>

                          <br><br>`
  

  onValue(getteamaplayers,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("lineupteamA").innerHTML += 
      `
      <form id="playeraform">
        <input type="checkbox" class="checkbox" value="${issue}" name="teamplayerA">
        <label for="flexCheckChecked">${issue}</label>
          <br>
       </form> `
    })
  })

  onValue(gettebmaplayers,(snapshot)=>
  {
    snapshot.forEach(snap => 
    {
      const issue = snap.val();

      document.getElementById("lineupteamB").innerHTML += 
      `
      <form id="playeraform">
        <input type="checkbox" class="checkbox" value="${issue}" name="teamplayerB">
        <label for="flexCheckChecked">${issue}</label>
          <br>
       </form>
      `
      

    })
  })
});


var teama = [];
var teamb = [];

buttonsavelineupA.addEventListener('click', () => 
{

  var checkboxes = document.getElementsByName('teamplayerA');

  for (var i=0;i<checkboxes.length;i++)
  {
    if (checkboxes[i].checked==true)
    {
        teama.push(checkboxes[i].value);
    }
  }


});


buttonsavelineupB.addEventListener('click', () => 
{

  var checkboxes = document.getElementsByName('teamplayerB');

  for (var i=0;i<checkboxes.length;i++)
  {
    if (checkboxes[i].checked==true)
    {
        teamb.push(checkboxes[i].value);
    }
  }

});


window.onload=readteamsandmatches;

</script>


<script>
  
   function cr7(ele) 
   {
      var btnValue = ele.innerText;
      localStorage.setItem("MatchSelected",btnValue);
      return false;
  }
</script>

</body>

</html>